<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Telestrations</title>
        
        <!-- favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png">
        <link rel="manifest" href="assets/images/site.webmanifest">
        <link rel="mask-icon" href="assets/images/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        
        <!-- custom scrollbar SOURCE: http://manos.malihu.gr/jquery-custom-content-scroller/ -->
        <link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.css"/>
        
        <!-- materialize.css-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="assets/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
        <link href="assets/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>

        <!-- dependency: React.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-with-addons.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
        
        <!-- Literally Canvas SOURCE : http://literallycanvas.com/index.html open source drawing board code -->
        <script src="assets/js/literallycanvas.js"></script>
        <link href="assets/css/literallycanvas.css" rel="stylesheet">
    </head>
    
    <body>
        <!-- script at top -->
        <script>
            // submit guess button
            function submitGuess(){
                var guess = $('#guessBox').val();
                var modalText = "";
                if(guess == ""){
                    modalText += '<h4>Please enter a guess.</h4><div class="modal-footer"><a class="modal-close waves-effect waves-light btn-flat">Close</a></div>';
                }
                else{
                    modalText += '<h4>Waiting on players:</h4><p id="players"></p>';
                    var obj = {"svg": "", 
                               "guess": guess};
                    var req = new XMLHttpRequest();
                    req.open('POST', '/submit', true);
                    req.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
                    req.send(JSON.stringify(obj));
                }
                document.getElementById('modalFill').innerHTML = modalText;
                console.log( document.getElementById('modalFill').innerHTML);
                return true;
            }
        </script>
        
        <!-- header -->
        <nav class="customHeader" role="navigation">
            <div class="nav-wrapper container"><a id="logo-container" href="" class="brand-logo">Telestrations</a>
            </div>
        </nav>
        
        <!-- top info -->
        <div class="section no-pad-bot no-pad-top" id="index-banner">
            <div class="container">
                <h4 class="header center customTitle">Guess: </h4>
                <form>
                    <div class="input-field col s12">
                        <input placeholder="Your Guess" id="guessBox" type="text" class="validate" required aria-required="true">
                        <label for="guessBox" data-error="wrong" data-success="right"></label>
                        <div class="center">
                            <a href="#modalWait" class="indigo darken-1 waves-effect waves-light btn modal-trigger" onclick="return submitGuess();">Submit Guess</a>
                        </div>
                    </div>
                </form>
                <!-- waiting for players modal -->
                <div id="modalWait" class="modal">
                    <div class="modal-content grey-text text-darken-2">
                        <div id="modalFill"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- center info -->
        <div class="container">
            <div class="section">
                <div class="row">
                    <!-- blank canvas block -->
                    <div class="col s12 m12 center" id="customDrawing"></div>
                </div>
            </div>
        </div>
        
         <!-- materialize script -->
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="assets/js/materialize.js"></script>
        <script src="assets/js/init.js"></script> 
        
        <!-- custom scrollbar script -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="assets/js/jquery.mCustomScrollbar.js"></script>

        <!-- other js -->
        <script>
            // make changes based on user
            // colors based on user
            var obj = {
                1: "#ef9a9a",
                2: "#f48fb1",
                3: "#ce93d8",
                4: "#b39ddb",
                5: "#9fa8da",
                6: "#90caf9",
                7: "#80deea",
                8: "#80cbc4",
                9: "#a5d6a7",
                10: "#fff59d",
                11: "#ffcc80",
                12: "#bcaaa4"
            };
            $(document).ready(function(){
                // set colors
                document.getElementsByClassName('customHeader')[0].style.backgroundColor = obj[{{index . "id"}}];
                document.getElementsByClassName('customTitle')[0].style.color = obj[{{index . "id"}}];
                document.getElementsByClassName('customButton')[0].style.backgroundColor = obj[{{index . "id"}}];

                // load image into body
                document.getElementById('customDrawing').innerHTML += ({{index . "drawing"}});
            });
        </script>
    </body> 
</html>